<div fxLayout="column" fxLayoutAlign="space-between start" class="timesheet-card bg-foreground mat-elevation-z2"
  *ngIf="timesheet">

  <span fxLayout="row" fxLayoutAlign="space-between stretch" class="w-100">

    <span fxLayout="column" fxLayoutAlign="start start">
      <span class="mat-body-2 p-0">
        {{ this.timesheet.startTime | date : 'longDate'}}
        {{ this.timesheet.startTime | date : 'shortTime' }} - {{ this.timesheet.endTime | date : 'shortTime' }}
      </span>
      <span class="mat-small">
        {{ this.timesheet.totalHours | readableDuration }} 
      </span>
      <span class="mat-small">
        ({{this.timesheet.missionId}}) {{ this.timesheet.mission?.address }} 
      </span>
      <span class="mat-body-2">
        {{ timesheet.comment }}
      </span>

    </span>

    <span *ngIf="timesheet.status === 0; else closedTimesheet" class="color-warn" fxLayout="column" fxLayoutAlign="space-between center">
      <span fxLayout="column" fxLayoutAlign="start center">
        <mat-icon>lock_open</mat-icon>
        <span class="mat-caption">åpen</span>
      </span>

      <button *ngIf="adminView; else buttons" mat-icon-button (click)="changeStatus()">
        <mat-icon>check_circle_outline</mat-icon>
      </button> 

      <ng-template #buttons>
        <button mat-icon-button color="accent" (click)="editTimesheet()">
          <mat-icon>edit</mat-icon>
        </button>
      </ng-template>
    </span>

    <ng-template #closedTimesheet>   
      <span class="color-success" fxLayout="column" fxLayoutAlign="space-between center">
        <span fxLayout="column" fxLayoutAlign="start center">
          <mat-icon>lock</mat-icon>
          <span class="mat-caption">låst</span>
        </span>

        <button *ngIf="adminView" mat-icon-button (click)="changeStatus()">
          <mat-icon>check_circle</mat-icon>
        </button> 
      </span>

    </ng-template>


  </span>

</div>
