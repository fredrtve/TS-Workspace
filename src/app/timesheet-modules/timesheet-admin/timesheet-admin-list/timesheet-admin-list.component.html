<app-main-skeleton *ngIf="vm$ | async; let vm">

    <app-main-top-nav-bar navbar [config]="vm.navConfig" >
    </app-main-top-nav-bar>

    <div class="h-100 max-width" fxLayout="column" fxLayoutAlign="start stretch" *ngIf="vm.timesheets?.length else loading">  
        <cdk-virtual-scroll-viewport itemSize="104" maxBufferPx="800" minBufferPx="800" fxFlex>
            <div class="m-1" *cdkVirtualFor="let timesheet of vm.timesheets; trackBy: trackById">
                <app-timesheet-card [timesheet]="timesheet"
                    [actionButton]="{ 
                        icon: timesheet.status ? 'check_circle' : 'check_circle_outline', 
                        color: timesheet.status ? 'primary' : 'warn',
                        callback: toggleTimesheetStatus, params: [timesheet]
                    }">
                </app-timesheet-card>
            </div>
        </cdk-virtual-scroll-viewport>
    </div>

</app-main-skeleton>

<ng-template #loading>
    <mat-spinner *ngIf="loading$ | async else noContent" class="center-spinner" color="accent"></mat-spinner>
</ng-template>

<ng-template #noContent>
    <div class="w-100 text-center mt-2 mat-h3">Fant ingen timer!</div>
</ng-template>

